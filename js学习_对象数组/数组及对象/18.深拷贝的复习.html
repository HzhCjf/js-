<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // 用for循环也可以深拷贝一个数组
        // let arr = [1,2,3]
        // let arr2 = []
        // for(i = 0;i < arr.length;i++){
        //     arr2[i] = arr[i]
        // }
        // console.log('arr',arr,'arr2',arr2);
        // 封装这个拷贝
        
        
        /* function copy(arr){
            let arr2 = []
            for(i = 0;i < arr.length;i++){
               arr2[i] = arr[i]
            }
            return arr2       
        }
        let arr = [1,2,3]
        let arr2 = copy(arr)
        console.log('arr',arr,'arr2',arr2); */


        // 扩展copy函数,让他不仅可以复制数组,还可以复制对象
        /* function copy(obj1){
            let obj2 = Array.isArray?[]:{}
            for(let key in obj1){
                obj2[key] = obj1[key]
            }
            return obj2
        }
        let arr = [1,2,3]
        let arr2 = copy(arr)
        console.log('arr',arr,'arr2',arr2);
        let obj1 = {
            name:"张三",
            age:20
        }
        let obj2 = copy(obj1)
        // obj2.name = 2
        console.log('obj1',obj1,'obj2',obj2); */


         // 上面的拷贝虽然已经达成了拷贝数组和对象的问题,但是不能拷贝对象的复杂数据类型,所以得进一步修改
         function copy(obj1){
            // 判断是否是数组,是数组就创建数组,不是就创建对象
            let obj2 = Array.isArray?[]:{}
            // 遍历
            for(let key in obj1){
                // 对对象中的值进行类型判断,如果是对象,则继续调用函数,来进行拷贝
                if(typeof obj1[key] === 'object'){
                    obj2[key] = copy(obj1[key])
                }
                else{
                    // 不是则直接拷贝
                    obj2[key] = obj1[key]
                }
            }
            // 返回拷贝的
            return obj2
         }
         let obj1 = {
            name:'张三',
            age:22,
            hello:{
                one:123
            },
            a:undefined,
            b:null,
            arr:[1,2,3]
         }
         let obj2 = copy(obj1)
        //  obj2.hello.one = 6666
         console.log('obj1',obj1,'obj2',obj2);
    </script>
</body>
</html>