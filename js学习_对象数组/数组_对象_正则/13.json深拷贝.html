<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        /* 
            js里面简单的数据类型不会出现引入问题,复杂数据类型会出现引用问题

            简单数据类型: String Number Undefined Null BOOlean Symbol BigInt
            复杂数据类型: Object Array Function Regular
        */

        // 简单数据类型引用:
        let a = 10;
        let b = a;
        b = 20;
        console.log(a);//10
        // 复杂数据类型引用:
        let arr1 = [1,2,3,4];
        let arr2 = arr1;
        arr2[2] = 5;
        // 会把arr1数组造成修改,因为复杂数据类型赋值是把值的地址进行赋予,当两个变量值的地址一样的时候,只要一方
        // 有一个修改了,就都会进行修改
        console.log(arr1);//arr1[1,2,5,4]


        console.log('============================================');
        // 内存的两个区域 栈(有序排列) 堆(无序排列)
        // js里的简单数据类型会存在栈里,复杂数据类型的类名会存在栈里,数据会存在堆里

        // json方法的深拷贝
        // json是新的数据结构,是用固定格式的字符串,有点类似对象或者数组
        // json是现在主流的传输数据格式

        // 这个是自定义的json拷贝
        let arr = [1,2,3]
        // 创建json要在外边加双引号
        let jsonArr = "[1,2,3]";
        let obj = {
            name:"张三"
        }
        console.log(obj);
        // 对象json里面的键名也要加双引号""
        let jsonObj = '{"name":"张三"}';
        console.log(jsonObj);


        console.log('============================================');
        // 用json函数的深拷贝
        // 把数组或者对象转成json字符串
        let arr_2 = [1,2,3]
        let obj2 = {
            name:"张三"
        }
        console.log(arr_2);
        let jsonstr = JSON.stringify(arr2);
        console.log(jsonstr);

        console.log('============================================');
        // 可以吧json字符串转成数组或者对象
        let jsonObj2 = '{"name":"张三"}';
        let obj_2 = JSON.parse(jsonObj2)
        console.log(jsonObj2);
        console.log(obj_2);



        console.log('============================================');
        // 利用json实现深拷贝
        let arr3 = [1,2,3,4,5]
        // 先转换为json,然后再转换回来,实现深拷贝,改写也不会更改arr3数组
        let arr_3 = JSON.parse(JSON.stringify(arr3))
        arr_3[1] = 'hello'
        console.log(arr3);
        console.log(arr_3);

        console.log('============================================');
        // json深拷贝在转换的过程中会丢失一些类型的数据
        // 丢失类型: Undefined Function Symbol Map Set
        let obj3 = {
            name:"张三",
            age:20,
            fn:function(){
                console.log(11);
            },
            a:null,
            b:undefined
        }
        console.log(obj3);
        let obj_3 = JSON.parse(JSON.stringify(obj3))
        console.log(obj_3);
    </script>
</body>
</html>